import{a as D}from"./chunk-DXEAHCV2.js";import{A as R,B as q,C as W,k as N,p as G,u as L}from"./chunk-QTROLIRN.js";import{b as F,f as T,h as V,l as A}from"./chunk-JCYDLHOV.js";import"./chunk-BNSYELAG.js";import{e as y,f as I,i as z,o as B,q as j}from"./chunk-E4KDVWXH.js";import{$a as E,Jb as r,Kb as h,Lb as f,Mb as P,Nb as O,Ob as k,Pa as a,Pb as S,Ua as d,fb as g,lb as u,ma as l,mb as M,na as m,oa as _,pa as C,qb as n,rb as i,sb as v,tb as w,yb as b,zb as p}from"./chunk-FLW74USA.js";function X(o,e){if(o&1&&(n(0,"div",18)(1,"div",19)(2,"span",20),r(3),i(),n(4,"span",21),r(5),i()(),v(6,"div",22),i()),o&2){let t=e.$implicit,s=p(2);a(3),h(t.nombre),a(2),f("",t.ganancias,"\u20AC"),a(),M("width",t.ganancias/s.maxGanancia*100,"%")}}function $(o,e){if(o&1&&(n(0,"li",23)(1,"span",24),r(2),i(),n(3,"span",25),r(4),i()()),o&2){let t=e.$implicit;a(2),h(t.nombre),a(2),f("",t.ganancias," \u20AC")}}function J(o,e){if(o&1){let t=w();n(0,"div",1)(1,"div",2),b("click",function(){l(t);let c=p();return m(c.irAInicio())}),n(2,"span"),r(3,"Gestionart"),i()(),n(4,"div",3),_(),n(5,"svg",4),b("click",function(){l(t);let c=p();return m(c.volver())}),v(6,"polyline",5),i(),C(),n(7,"h1",6),r(8," Estadisticas "),i()(),n(9,"h5",7),r(10),i(),n(11,"div",8)(12,"h2",9),r(13),i(),n(14,"div",10)(15,"h3",11),r(16,"Top 5 Beneficios"),i(),n(17,"div",12),g(18,X,7,4,"div",13),i()(),n(19,"div",14)(20,"h3",11),r(21,"Lista detallada de productos"),i(),n(22,"input",15),S("ngModelChange",function(c){l(t);let x=p();return k(x.filtroBusqueda,c)||(x.filtroBusqueda=c),m(c)}),i(),n(23,"ul",16),g(24,$,5,2,"li",17),i()()()()}if(o&2){let t=p();a(10),P("",t.evento.nombre," - ",t.evento.fecha,""),a(3),f("Ganancias totales: ",t.calcularGananciasTotales()," \u20AC"),a(5),u("ngForOf",t.productosEventoOrdenados),a(4),O("ngModel",t.filtroBusqueda),a(2),u("ngForOf",t.productosFiltrados())}}var H=class o{constructor(e,t,s,c,x,K){this.eventoService=e;this.productosService=t;this.route=s;this.router=c;this.dialog=x;this.snackBar=K}idEvento="";evento;productosEvento=[];filtroBusqueda="";ngOnInit(){this.route.paramMap.subscribe(e=>{this.idEvento=e.get("idEvento")||"",this.idEvento&&this.obtenerEvento()})}irAInicio(){this.router.navigate([""])}productosFiltrados(){let e=this.filtroBusqueda.toLowerCase();return this.productosEventoLista.filter(t=>t.nombre.toLowerCase().includes(e))}obtenerEvento(){this.eventoService.getEvento(this.idEvento).subscribe(e=>{this.evento=e,this.obtenerProductos()})}obtenerProductos(){this.productosService.getProductosEvento(this.idEvento).subscribe(e=>{this.productosEvento=e})}get productosEventoOrdenados(){return this.productosEvento.filter(e=>e.vendidos>0).slice().sort((e,t)=>t.ganancias-e.ganancias).slice(0,5)}get productosEventoLista(){return this.productosEvento.sort((e,t)=>t.ganancias-e.ganancias)}get maxGanancia(){return Math.max(...this.productosEvento.map(e=>e.ganancias||0),1)}calcularGananciasTotales(){return this.productosEvento.reduce((e,t)=>e+(t.ganancias||0),0)}volver(){this.router.navigate([`eventos/detalle/${this.idEvento}`])}static \u0275fac=function(t){return new(t||o)(d(D),d(q),d(B),d(j),d(N),d(W))};static \u0275cmp=E({type:o,selectors:[["estadisticas-evento-component"]],decls:1,vars:1,consts:[["class","eventos-container",4,"ngIf"],[1,"eventos-container"],[1,"app-nombre",3,"click"],[1,"titulo-container",2,"display","flex","align-items","center"],["xmlns","http://www.w3.org/2000/svg","width","30","height","24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",2,"cursor","pointer","margin-right","16px","margin-left","-10%",3,"click"],["points","15 18 9 12 15 6"],[1,"titulo",2,"margin","0"],[1,"titulo2"],[1,"contenido-principal"],[1,"titulo-ganancias"],[1,"grafica-container"],[1,"subtitulo"],[1,"grafica-scroll"],["class","barra-container",4,"ngFor","ngForOf"],[1,"lista-container"],["type","text","placeholder","Buscar producto...",3,"ngModelChange","ngModel"],[1,"lista-ganancias"],["class","lista-item",4,"ngFor","ngForOf"],[1,"barra-container"],[1,"barra-info"],[1,"producto-nombre"],[1,"producto-ganancia"],[1,"barra"],[1,"lista-item"],[1,"item-nombre"],[1,"item-ganancia"]],template:function(t,s){t&1&&g(0,J,25,6,"div",0),t&2&&u("ngIf",s.evento)},dependencies:[A,F,T,V,z,y,I,G,L,R],styles:['.eventos-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column;background-image:url("./media/f-MHIBCXNN.jpg");background-size:cover;background-position:center;background-repeat:no-repeat;background-attachment:fixed;justify-content:center;align-items:center;color:#fff;text-align:center;border:none!important;outline:none!important;box-shadow:none!important}.app-nombre[_ngcontent-%COMP%]{position:absolute;top:16px;left:24px;font-size:17px;font-weight:600;color:#fff;cursor:pointer;z-index:10;text-transform:uppercase;letter-spacing:.5px;text-shadow:1px 1px 2px rgba(0,0,0,.3);transition:transform .2s ease,color .2s ease}.app-nombre[_ngcontent-%COMP%]:hover{transform:scale(1.05);color:#fff}.contenido-principal[_ngcontent-%COMP%]{min-height:70vh;min-width:80vw;margin:0;background:#ffffff1c;-webkit-backdrop-filter:blur(30px);backdrop-filter:blur(30px);border-radius:8px;box-shadow:0 2px 4px #0000001a;padding:15px}.titulo-ganancias[_ngcontent-%COMP%]{text-align:center;font-size:1.3rem;margin-bottom:15px;padding:10px;background:linear-gradient(135deg,#b7c1ee,#f3dcab);color:#288738;border-radius:6px;box-shadow:0 1px 3px #0000001a}.subtitulo[_ngcontent-%COMP%]{color:#34495e;font-size:1rem;margin-bottom:12px;text-align:center;font-weight:600}.grafica-container[_ngcontent-%COMP%]{margin-bottom:20px;padding:12px;background:#f8f9fa;border-radius:6px;border:1px solid #e9ecef}.grafica-scroll[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;gap:10px;padding:5px 0}.barra-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;padding:8px;background:#fff;border-radius:4px;box-shadow:0 1px 2px #0000001a}.barra-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-weight:500;margin-bottom:3px;font-size:.9rem}.producto-nombre[_ngcontent-%COMP%]{color:#2c3e50;font-size:.9rem;flex:1;padding-right:5px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.producto-ganancia[_ngcontent-%COMP%]{color:#27ae60;font-weight:700;font-size:.9rem;flex-shrink:0}.barra[_ngcontent-%COMP%]{height:20px;background:linear-gradient(90deg,#4caf50,#45a049);border-radius:10px;min-width:2px;transition:all .3s ease;box-shadow:0 1px 2px #4caf504d}.lista-container[_ngcontent-%COMP%]{padding:12px;background:#f8f9fa;border-radius:6px;border:1px solid #e9ecef}.lista-ganancias[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.lista-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;margin-bottom:6px;background:#fff;border-radius:4px;border-left:3px solid #4caf50;box-shadow:0 1px 2px #0000001a;transition:all .2s ease}.lista-item[_ngcontent-%COMP%]:hover{transform:translate(2px);box-shadow:0 2px 4px #00000026}.lista-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.item-nombre[_ngcontent-%COMP%]{color:#2c3e50;font-weight:500;font-size:.9rem;flex:1;padding-right:5px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.item-ganancia[_ngcontent-%COMP%]{color:#27ae60;font-weight:700;font-size:.9rem;background:#e8f5e8;padding:3px 8px;border-radius:10px;flex-shrink:0}@media (max-width: 480px){.eventos-container[_ngcontent-%COMP%]{padding:8px}.contenido-principal[_ngcontent-%COMP%]{padding:12px}.app-nombre[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.6rem}.titulo-ganancias[_ngcontent-%COMP%]{font-size:1.1rem;padding:8px}.subtitulo[_ngcontent-%COMP%]{font-size:.9rem}.grafica-container[_ngcontent-%COMP%], .lista-container[_ngcontent-%COMP%]{padding:10px}.barra-container[_ngcontent-%COMP%]{padding:6px}.lista-item[_ngcontent-%COMP%]{padding:8px 10px}}.titulo-container[_ngcontent-%COMP%]{margin-top:5rem}.titulo[_ngcontent-%COMP%]{margin-top:4rem}.titulo2[_ngcontent-%COMP%]{margin-top:0rem}input[type=text][_ngcontent-%COMP%]{width:100%;padding:8px 4px;margin-bottom:20px;font-size:1rem;background:#ffffff06;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border:none;border-bottom:2px solid #ccc;color:#000;outline:none;transition:border-color .3s ease}input[type=text][_ngcontent-%COMP%]::placeholder{color:#5b5959;opacity:1}input[type=text][_ngcontent-%COMP%]:focus{border-bottom-color:#000}']})};export{H as EstadisticasEventoComponent};
