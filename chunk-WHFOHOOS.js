import{a as j}from"./chunk-DXEAHCV2.js";import{a as $,b as U,c as X,d as J,e as K,f as Q}from"./chunk-P6OXOXUO.js";import{A as tt,B as et,C as ot,k as R,p as W,t as N,u as D,v as G,w as H,x as Y,z as Z}from"./chunk-QTROLIRN.js";import{b as V,f as T,h as z,i as F,k as L,l as q}from"./chunk-JCYDLHOV.js";import"./chunk-BNSYELAG.js";import{e as S,f as y,i as I,o as A,q as B}from"./chunk-E4KDVWXH.js";import{$a as O,Jb as s,Kb as w,Lb as v,Mb as k,Nb as C,Ob as M,Pa as c,Pb as P,Ua as x,fb as g,lb as p,ma as u,na as m,oa as h,pa as E,qb as o,rb as n,sb as b,tb as _,yb as f,zb as l}from"./chunk-FLW74USA.js";function it(i,t){if(i&1){let e=_();o(0,"button",16),f("click",function(){u(e);let a=l();return m(a.scrollToResumen())}),h(),o(1,"svg",17),b(2,"path",18),n()()}}function rt(i,t){if(i&1&&(o(0,"div",19)(1,"span"),s(2),n()()),i&2){let e=l();c(2),k("",e.productosFiltrados.length," de ",e.productosListaSeleccion.length," productos")}}function at(i,t){if(i&1){let e=_();o(0,"div",27)(1,"div",28)(2,"label",29),s(3,"Cantidad:"),n(),o(4,"mat-form-field",30)(5,"input",31),P("ngModelChange",function(a){u(e);let d=l().$implicit;return M(d.cantidadEvento,a)||(d.cantidadEvento=a),m(a)}),f("ngModelChange",function(){u(e);let a=l().$implicit,d=l();return m(d.actualizarProductoEvento(a))}),n()()(),o(6,"div",28)(7,"label",29),s(8,"\xBFSe vende el de muestra?"),n(),o(9,"mat-radio-group",32),P("ngModelChange",function(a){u(e);let d=l().$implicit;return M(d.venderMuestra,a)||(d.venderMuestra=a),m(a)}),f("ngModelChange",function(){u(e);let a=l().$implicit,d=l();return m(d.actualizarProductoEvento(a))}),o(10,"mat-radio-button",33),s(11,"No"),n(),o(12,"mat-radio-button",33),s(13,"S\xED"),n()()()()}if(i&2){let e=l().$implicit;c(5),C("ngModel",e.cantidadEvento),c(4),C("ngModel",e.venderMuestra),c(),p("value",!1),c(2),p("value",!0)}}function ct(i,t){if(i&1){let e=_();o(0,"div",20)(1,"div",21)(2,"mat-checkbox",22),P("ngModelChange",function(a){let d=u(e).$implicit;return M(d.seleccionado,a)||(d.seleccionado=a),m(a)}),f("change",function(){let a=u(e).$implicit,d=l();return m(d.toggleProducto(a))}),n(),o(3,"div",23)(4,"h4",24),s(5),n(),o(6,"span",25),s(7),n()()(),g(8,at,14,4,"div",26),n()}if(i&2){let e=t.$implicit;c(2),C("ngModel",e.seleccionado),c(3),w(e.nombre),c(2),v("",e.precio,"\u20AC"),c(),p("ngIf",e.seleccionado)}}function dt(i,t){if(i&1&&(o(0,"div",34),h(),o(1,"svg",35),b(2,"circle",7)(3,"path",8)(4,"line",36)(5,"line",37),n(),E(),o(6,"p"),s(7),n()()),i&2){let e=l();c(7),v('No se encontraron productos que coincidan con "',e.terminoBusqueda,'"')}}function st(i,t){i&1&&(o(0,"span",46),s(1,"MUESTRA"),n())}function lt(i,t){if(i&1&&(o(0,"div",41)(1,"div",42)(2,"span",43),s(3),n(),o(4,"div",44)(5,"span"),s(6),n(),o(7,"span"),s(8),n(),g(9,st,2,0,"span",45),n()()()),i&2){let e=t.$implicit;c(3),w(e.nombre),c(3),v("",e.precio,"\u20AC"),c(2),v("Cantidad: ",e.stock,""),c(),p("ngIf",e.venderMuestra)}}function pt(i,t){if(i&1&&(o(0,"div",38)(1,"h4"),s(2),n(),o(3,"div",39),g(4,lt,10,4,"div",40),n()()),i&2){let e=l();c(2),v("Productos Seleccionados (",e.productosEvento.length,")"),c(2),p("ngForOf",e.productosEvento)}}function ut(i,t){if(i&1){let e=_();o(0,"button",16),f("click",function(){u(e);let a=l(2);return m(a.scrollToBusqueda())}),h(),o(1,"svg",17),b(2,"path",49),n()()}}function mt(i,t){if(i&1){let e=_();o(0,"div",47)(1,"button",48),f("click",function(){u(e);let a=l();return m(a.guardarProductosEvento())}),s(2," Guardar Productos "),n(),g(3,ut,3,0,"button",9),n()}if(i&2){let e=l();c(3),p("ngIf",e.productosEvento.length>0)}}var nt=class i{constructor(t,e,r,a,d,gt){this.eventoService=t;this.productosService=e;this.route=r;this.router=a;this.dialog=d;this.snackBar=gt}idEvento;productosEvento=[];productosListaSeleccion=[];productosLista;terminoBusqueda="";productosFiltrados=[];ngOnInit(){this.route.paramMap.subscribe(t=>{this.idEvento=t.get("idEvento")||""}),this.getProductos()}filtrarProductos(){if(!this.terminoBusqueda||this.terminoBusqueda.trim()==="")this.productosFiltrados=[...this.productosListaSeleccion];else{let t=this.terminoBusqueda.toLowerCase().trim();this.productosFiltrados=this.productosListaSeleccion.filter(e=>e.nombre.toLowerCase().includes(t))}}limpiarBusqueda(){this.terminoBusqueda="",this.filtrarProductos()}getProductos(){this.productosService.getProductos().subscribe(t=>{this.productosLista=t,this.productosFiltrados=t,this.inicializarProductos()})}inicializarProductos(){this.productosListaSeleccion=this.productosLista.map(t=>({id:t.id,nombre:t.nombre,precio:t.precio,seleccionado:!1,cantidadEvento:1,venderMuestra:!1}))}toggleProducto(t){t.seleccionado?this.agregarProductoEvento(t):this.quitarProductoEvento(t.id)}agregarProductoEvento(t){let e={nombre:t.nombre,precio:t.precio,stock:t.cantidadEvento,vendidos:0,idEvento:this.idEvento,ganancias:0,venderMuestra:t.venderMuestra},r=this.productosEvento.findIndex(a=>a.nombre===t.nombre);r>=0?this.productosEvento[r]=e:this.productosEvento.push(e)}quitarProductoEvento(t){let e=this.productosLista.find(r=>r.id===t);e&&(this.productosEvento=this.productosEvento.filter(r=>r.nombre!==e.nombre))}actualizarProductoEvento(t){t.seleccionado&&this.agregarProductoEvento(t)}obtenerProductosEvento(){return this.productosEvento}limpiarSeleccion(){this.productosListaSeleccion.forEach(t=>{t.seleccionado=!1,t.cantidadEvento=1,t.venderMuestra=!1}),this.productosEvento=[]}irAInicio(){this.router.navigate([""])}guardarProductosEvento(){this.productosEvento.forEach(t=>{this.productosService.addProductoEvento(t)}),this.snackBar.open("\u2713 Productos a\xF1adidos","",{duration:2500,panelClass:["success-snackbar"],horizontalPosition:"center",verticalPosition:"top"}),this.router.navigate([`eventos/editar/${this.idEvento}`])}scrollToResumen(){let t=document.getElementById("resumen");t&&t.scrollIntoView({behavior:"smooth",block:"start"})}scrollToBusqueda(){let t=document.getElementById("buscador");t&&t.scrollIntoView({behavior:"smooth",block:"start"})}static \u0275fac=function(e){return new(e||i)(x(j),x(et),x(A),x(B),x(R),x(ot))};static \u0275cmp=O({type:i,selectors:[["add-producto-evento-component"]],decls:21,vars:7,consts:[[1,"select-container"],[1,"app-nombre",3,"click"],[1,"titulo-selector"],["id","buscador",1,"buscador-container"],["appearance","fill",1,"buscador-field"],["matInput","","placeholder","Escribe el nombre del producto...",1,"buscador-input",3,"ngModelChange","ngModel"],["matSuffix","","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"search-icon"],["cx","11","cy","11","r","8"],["d","m21 21-4.35-4.35"],["class","scroll-flecha","title","Ir al resumen",3,"click",4,"ngIf"],["class","contador-productos",4,"ngIf"],[1,"productos-container"],["class","producto-card",4,"ngFor","ngForOf"],["class","no-productos",4,"ngIf"],["class","resumen-container","id","resumen",4,"ngIf"],["class","guardar-container",4,"ngIf"],["title","Ir al resumen",1,"scroll-flecha",3,"click"],["viewBox","0 0 24 24","stroke","currentColor","fill","none","stroke-width","2",1,"flecha-icon"],["d","M12 5v14M5 12l7 7 7-7","stroke-linecap","round","stroke-linejoin","round"],[1,"contador-productos"],[1,"producto-card"],[1,"producto-header"],[1,"producto-checkbox",3,"ngModelChange","change","ngModel"],[1,"producto-info"],[1,"producto-nombre"],[1,"producto-precio"],["class","producto-controles",4,"ngIf"],[1,"producto-controles"],[1,"control-group"],[1,"control-label"],["appearance","outline",1,"cantidad-input-mobile"],["matInput","","type","number","min","1",3,"ngModelChange","ngModel"],[1,"radio-group-mobile",3,"ngModelChange","ngModel"],[1,"radio-mobile",3,"value"],[1,"no-productos"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"no-productos-icon"],["x1","9","y1","9","x2","13","y2","13"],["x1","13","y1","9","x2","9","y2","13"],["id","resumen",1,"resumen-container"],[1,"resumen-lista"],["class","resumen-item",4,"ngFor","ngForOf"],[1,"resumen-item"],[1,"resumen-info"],[1,"resumen-nombre"],[1,"resumen-detalles"],["class","muestra-badge",4,"ngIf"],[1,"muestra-badge"],[1,"guardar-container"],["mat-raised-button","","color","primary",1,"guardar-btn",3,"click"],["d","M12 19V5M5 12l7-7 7 7","stroke-linecap","round","stroke-linejoin","round"]],template:function(e,r){e&1&&(o(0,"div",0)(1,"div",1),f("click",function(){return r.irAInicio()}),o(2,"span"),s(3,"Gestionart"),n()(),o(4,"h3",2),s(5,"Agregar Productos al Evento"),n(),o(6,"div",3)(7,"mat-form-field",4)(8,"mat-label"),s(9,"Buscar productos"),n(),o(10,"input",5),P("ngModelChange",function(d){return M(r.terminoBusqueda,d)||(r.terminoBusqueda=d),d}),f("ngModelChange",function(){return r.filtrarProductos()}),n(),h(),o(11,"svg",6),b(12,"circle",7)(13,"path",8),n()(),g(14,it,3,0,"button",9),n(),g(15,rt,3,2,"div",10),E(),o(16,"div",11),g(17,ct,9,4,"div",12)(18,dt,8,1,"div",13),n(),g(19,pt,5,2,"div",14)(20,mt,4,1,"div",15),n()),e&2&&(c(10),C("ngModel",r.terminoBusqueda),c(4),p("ngIf",r.productosEvento.length>0),c(),p("ngIf",r.terminoBusqueda),c(2),p("ngForOf",r.productosFiltrados),c(),p("ngIf",r.productosFiltrados.length===0&&r.terminoBusqueda),c(),p("ngIf",r.productosEvento.length>0),c(),p("ngIf",r.productosEvento.length>0))},dependencies:[q,V,F,T,L,z,I,S,y,W,D,N,tt,Z,Y,G,H,Q,J,K,X,U,$],styles:['.select-container[_ngcontent-%COMP%]{position:relative;min-height:100vh;padding:24px 16px;width:100vw;display:flex;flex-direction:column;background-image:url("./media/f-MHIBCXNN.jpg");background-size:cover;background-position:center;background-repeat:no-repeat;background-attachment:fixed;color:#fff;box-shadow:0 4px 8px #0003}.app-nombre[_ngcontent-%COMP%]{position:absolute;top:16px;left:24px;font-size:17px;font-weight:600;color:#fff;cursor:pointer;z-index:10;text-transform:uppercase;letter-spacing:.5px;text-shadow:1px 1px 2px rgba(0,0,0,.3);transition:transform .2s ease,color .2s ease}.app-nombre[_ngcontent-%COMP%]:hover{transform:scale(1.05);color:#fff}.titulo-selector[_ngcontent-%COMP%]{margin-bottom:24px;color:#fff;font-weight:bolder;margin-top:60px;font-size:1.5rem!important;text-align:center}.productos-container[_ngcontent-%COMP%]{padding:16px;background-color:#f8f9fa;border-radius:12px;margin-bottom:24px}.producto-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;margin-bottom:16px;padding:20px;box-shadow:0 2px 8px #0000001a;border:1px solid #e0e0e0;transition:all .2s ease}.producto-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 16px #00000026}.producto-card[_ngcontent-%COMP%]:last-child{margin-bottom:0}.producto-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;margin-bottom:12px}.producto-checkbox[_ngcontent-%COMP%]{flex-shrink:0}.producto-info[_ngcontent-%COMP%]{flex:1;min-width:0}.producto-nombre[_ngcontent-%COMP%]{margin:0 0 4px;font-size:1.1em;font-weight:600;color:#333;line-height:1.3;word-wrap:break-word}.producto-precio[_ngcontent-%COMP%]{font-size:1.2em;font-weight:700;color:#2196f3}.producto-controles[_ngcontent-%COMP%]{padding-top:16px;border-top:1px solid #f0f0f0;animation:_ngcontent-%COMP%_fadeIn .3s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.control-group[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px;gap:16px}.control-group[_ngcontent-%COMP%]:last-child{margin-bottom:0}.control-label[_ngcontent-%COMP%]{font-size:1em;font-weight:500;color:#555;min-width:120px;flex-shrink:0}.cantidad-input-mobile[_ngcontent-%COMP%]{width:100px;flex-shrink:0}.cantidad-input-mobile[_ngcontent-%COMP%]   .mat-mdc-form-field-wrapper[_ngcontent-%COMP%]{padding-bottom:0}.radio-group-mobile[_ngcontent-%COMP%]{display:flex;gap:20px;flex-shrink:0}.radio-mobile[_ngcontent-%COMP%]{font-size:1em}.resumen-container[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e3f2fd,#f3e5f5);padding:24px;border-radius:12px;border-left:4px solid #2196f3;margin-top:24px}.resumen-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 16px;color:#2196f3;font-size:1.2em;text-align:center;font-weight:600}.resumen-lista[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.resumen-item[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:16px;border:1px solid #e0e0e0;box-shadow:0 1px 3px #0000001a}.resumen-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.resumen-nombre[_ngcontent-%COMP%]{font-weight:600;color:#333;font-size:1em}.resumen-detalles[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:12px;align-items:center;font-size:.9em;color:#666}.muestra-badge[_ngcontent-%COMP%]{background-color:#ff9800;color:#fff;padding:4px 10px;border-radius:16px;font-size:.8em;font-weight:600;text-transform:uppercase;letter-spacing:.5px}@media (min-width: 768px){.select-container[_ngcontent-%COMP%]{max-width:800px;padding:32px}.titulo-selector[_ngcontent-%COMP%]{font-size:1.6em;margin-bottom:32px}.productos-container[_ngcontent-%COMP%]{padding:24px}.producto-card[_ngcontent-%COMP%]{padding:24px;margin-bottom:20px}.control-group[_ngcontent-%COMP%]{margin-bottom:20px}.control-label[_ngcontent-%COMP%]{min-width:160px;font-size:1.1em}.cantidad-input-mobile[_ngcontent-%COMP%]{width:120px}}@media (max-width: 480px){.select-container[_ngcontent-%COMP%]{padding:16px}.titulo-selector[_ngcontent-%COMP%]{font-size:1.2em;margin-bottom:20px}.producto-card[_ngcontent-%COMP%]{padding:16px;margin-bottom:12px}.control-group[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:12px;margin-bottom:16px}.control-label[_ngcontent-%COMP%]{min-width:auto;text-align:left;margin-bottom:8px}.radio-group-mobile[_ngcontent-%COMP%]{justify-content:center;gap:24px}.cantidad-input-mobile[_ngcontent-%COMP%]{width:100%;max-width:150px;margin:0 auto}.resumen-container[_ngcontent-%COMP%]{padding:20px;margin-top:20px}}.buscador-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:16px}.buscador-field[_ngcontent-%COMP%]{flex:1;min-width:0}.buscador-input[_ngcontent-%COMP%]{font-size:14px;width:100}.limpiar-busqueda[_ngcontent-%COMP%]{flex-shrink:0}.contador-productos[_ngcontent-%COMP%]{font-size:12px;color:#666;margin-bottom:12px;text-align:right}.no-productos[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#666}.no-productos-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px;opacity:.5}.no-productos[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}@media (max-width: 768px){.buscador-container[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.contador-productos[_ngcontent-%COMP%]{text-align:center;color:#fff;font-size:15px}}.guardar-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:24px;margin-bottom:16px}.guardar-btn[_ngcontent-%COMP%]{font-family:Outfit,sans-serif;background:#ffffff5a;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);border-bottom:2px solid rgba(0,0,0,.2);padding:10px 20px;font-size:16px;color:#000;transition:background .3s ease}.guardar-btn[_ngcontent-%COMP%]:hover{background:#ffffff4d}.scroll-flecha[_ngcontent-%COMP%]{margin-left:8px;display:inline-flex;align-items:center;justify-content:center;background:#fff9;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);border-radius:50%;width:36px;height:36px;cursor:pointer;transition:background .2s}.scroll-flecha[_ngcontent-%COMP%]:hover{background:#fffc}.flecha-icon[_ngcontent-%COMP%]{width:20px;height:20px;color:#333}html[_ngcontent-%COMP%]{scroll-behavior:smooth}.scroll-flecha[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:8px;background-color:#1976d2;color:#fff;border-radius:50%;text-decoration:none;transition:all .3s ease;box-shadow:0 2px 4px #0003;flex-shrink:0}.scroll-flecha[_ngcontent-%COMP%]:hover{background-color:#1565c0;transform:translate(2px);box-shadow:0 4px 8px #0000004d}.flecha-icon[_ngcontent-%COMP%]{width:20px;height:20px}.buscador-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:16px}@media (max-width: 768px){.buscador-container[_ngcontent-%COMP%]{flex-direction:row;align-items:center;gap:8px}.scroll-flecha[_ngcontent-%COMP%]{padding:6px;background-color:#ffffff84;border:#e0e0e0}.scroll-flecha[_ngcontent-%COMP%]:hover{padding:6px;background-color:#e5d2b884;border:#e0e0e0}.flecha-icon[_ngcontent-%COMP%]{width:18px;height:18px}}']})};export{nt as AddProductoEventoComponent};
